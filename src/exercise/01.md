# 浮点数十进制转64进制

> 作者: 李经纬 日期: 2021-07-14


<!-- 浮点数十进制转64进制 -->

## 代码

> 进制转换基准

  ```javascript

  // 转换基准
  let baseStr = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/';

  let valCharMap = {}
  let charValMap = {}

  baseStr.split('').forEach((item, idx) =>{
    valCharMap[idx] = item
    charValMap[item] = idx
  })

```

> 浮点数十进制转64以下进制的高阶函数

```javascript
  // 浮点数十进制转64以下进制 
  // 注意点
  // 1. 正负数
  // 2. 整数与小数
  function decimalToNScale(n) {
    if(n > 64) {
      throw new RangeError('不支持64以上进制');
    }
    return (num) =>{
      if(typeof num !== 'number') {
        throw new TypeError('请输入number类型的值');
      }
      // 正负数
      let isPostiveNum = num > 0 ? true : false;
      // 整数部分
      let leftNum = parseInt(Math.abs(num));
      // 小数部分
      let rightNum = `${num}`.split('.')[1] || 0;
      let concatNum = [...decimalToNScaleByInt(n, leftNum), ...decimalToNScaleByDouble(n, `0.${rightNum}` * 1)]
      return isPostiveNum ? concatNum.join('') : ['-',concatNum].join('')
    }
  }
```

> 整数与小数部分进制转换

```javascript
  // 整数部分
  function decimalToNScaleByInt(n, intNum) {
    if(n > intNum) return [`${intNum}`];
    let stack = [];
    let flag;
    while(intNum / n !== 0) {
      flag = intNum % n
      stack.unshift(valCharMap[flag])
      intNum = (intNum - flag) / n
    }
    return stack
  }
  // 小数部分
  function decimalToNScaleByDouble(n, smallNum) {
    if(smallNum === 0) return [];
    let stack = ['.'];
    let flag;
    while(smallNum !== 0) {
      smallNum = n * smallNum;
      flag = parseInt(smallNum);
      smallNum = smallNum - flag;
      stack.push(valCharMap[flag])
    }
    flag = null;
    return stack
  }

  ```

> examples

```javascript

// 浮点数十进制转64进制
const $64fn = decimalToNScale(64)

```
